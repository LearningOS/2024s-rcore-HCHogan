# 实现思路

写了一个copyout函数，从内核复制到用户空间
mmap 和 munmap就按照用户的要求在memory set中添加/删除maparea，并维护pagetable

# 问答题

1. 63 - 55 保留 55到12物理页面地址 12-10保留 10-0权限和标记
2. store/load/instruction page fault, scause为对应的原因的值, lazy好处是用的时候才实际分配, 不会白白分配做无用功
   10G内存占用(10 x 2^10) / 4096 / 512 \* 4096 = 20MB 内存
   lazy策略: 在memory set中添加maparea，但是不实际在pagetable中映射，当产生page fault的时候查看这边在maparea中有没有，如果有的话说明是lazy分配的，现在实际分配内存并在页表中添加，并且可以考虑cow优化
   失效体现在pte的v位
3. 单页表的话只要切任务的时候切页表就行；内核页面U位值0不让用户访问内核页面；单页表优势 syscall的时候不用切换页表节省开销；双页表切到内核态和切换任务的时候都要切页表；如果我写单页表，会在切任务的时候切换页表

在完成本次实验的过程（含此前学习的过程）中，我曾分别与 以下各位 就（与本次实验相关的）以下方面做过交流，还在代码中对应的位置以注释形式记录了具体的交流对象及内容：

无

此外，我也参考了 以下资料 ，还在代码中对应的位置以注释形式记录了具体的参考来源及内容：

xv6

3. 我独立完成了本次实验除以上方面之外的所有工作，包括代码与文档。 我清楚地知道，从以上方面获得的信息在一定程度上降低了实验难度，可能会影响起评分。

4. 我从未使用过他人的代码，不管是原封不动地复制，还是经过了某些等价转换。 我未曾也不会向他人（含此后各届同学）复制或公开我的实验代码，我有义务妥善保管好它们。 我提交至本实验的评测系统的代码，均无意于破坏或妨碍任何计算机系统的正常运转。 我清楚地知道，以上情况均为本课程纪律所禁止，若违反，对应的实验成绩将按“-100”分计。
